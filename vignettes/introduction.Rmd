---
title: "Introduction to nomisr"
author: "Evan Odell"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction to Nomis

Nomis provides free access to up-to-date official statistics from the Office for National Statistics (ONS).

There is a lot of data available through Nomis, and there are some limits to the amount of data that can be retrieved within a certain period of time, although those are not published. For more details, see the [full API documentation](https://www.nomisweb.co.uk/api/v01/help) from Nomis.


## Querying data availability

Use the `nomis_data_info()` function without any parameters to get a tibble 
with metadata for all available datasets:

```{r, echo=FALSE, results='asis'}
  library(nomisr) 
  x <- nomis_data_info()
  head(x)
```


`nomis_data_info()` can also be used to query metadata from a specific 
dataset, using its ID. The example below uses the "LC4408EW - Tenure by 
number of persons per bedroom in household by household type" dataset from 
the census, including the 3 nested data frames including metadata important 
to making specific queries.

```{r, echo=FALSE, results='asis'}
  y <- nomis_data_info("NM_893_1")
  tibble::glimpse(y)
  
  y$annotations.annotation
  
  y$components.attribute
  
  y$components.dimension
```



When a tibble with metadata for all datasets or a specific dataset is 
returned, three of the columns: `annotations.annotation`, 
`components.attribute` and `components.dimension` are lists of nested 
data frames. `annotations.annotation` contains metadata on the dataset, 
including units and current status. `components.attribute` contains more 
detailed status metadata. `components.dimension` contains the grouping and 
summary variables available in the dataset, which vary between different 
datasets.



## Downloading data
<!-- Include instructions on using this -->

```{r, echo=FALSE, results='asis'}
 library(nomisr)
 z <- nomis_get_data(id="NM_1658_1", time="latest")
 tibble::glimpse(z)
```



